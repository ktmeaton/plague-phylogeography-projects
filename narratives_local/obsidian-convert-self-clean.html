<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Katherine Eaton" />
  <title>Obsidian Test</title>
  <style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../../pandoc/templates/pandoc-mvp-css/css/mvp.css" />
<style type="text/css">
  :root {
  --color: #2096ba;
  --color-secondary: #2096ba;
  --color-accent: #f7f8fa;
  --color-text: #222426;
  --color-shadow: #c5d2db;
  --width-content: 720px;
  }
  
  code, samp {
    font-size: 1.2em;
  }

  nav {
    justify-content: space-evenly;
  }
  
  a:hover {
    filter: none;
    color: #df6e21;
  }
</style>
</head>
<body>
<header id="title-block-header">
  <nav id="TOC">
      <a href="/"><img alt="Logo" src="" height="70"></a>
            <ul>
          <li><a href="#">Navigation</a>
            <ul>
            <li><a href="#objectives"><span>Objectives</span></a></li>
            <li><a href="#pandoc"><span>Pandoc</span></a></li>
            <li><a href="#citations"><span>Citations</span></a></li>
            <li><a href="#style"><span>Style</span></a></li>
            <li><a href="#final-workflow"><span>Final Workflow</span></a></li>
            <li><a href="#references"><span>References</span></a></li>
            </ul>
          </li>
      </ul>
        </nav>
<h1 class="title">Obsidian Test</h1>
<p class="author">Katherine Eaton</p>
<p class="date">May 2021</p>
</header>
<main>
<hr>
<article>
<h2 id="objectives"><a href="http://localhost:4000/plague-phylogeography-projects/main/full/all?c=continent&amp;d=map&amp;p=full&amp;transmissions=show">Objectives</a></h2>
<ol type="1">
<li>Write narratives from within Obsidian.</li>
<li>Strip wiki-links and convert to standardized markdown.</li>
<li>Manage citations automatically.</li>
</ol>
<hr />
<h2 id="pandoc"><a href="http://localhost:4000/plague-phylogeography-projects/main/full/all?c=continent&amp;d=map&amp;p=full&amp;transmissions=show">Pandoc</a></h2>
<h3 id="pdf">PDF</h3>
<p>A markdown can be converted to pdf using pandoc via:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pandoc</span> obsidian.md <span class="at">-o</span> obsidian.pdf</span></code></pre></div>
<h3 id="html">HTML</h3>
<p>A markdown can be converted to html using pandoc via:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pandoc</span> obsidian.md <span class="at">-o</span> obsidian.html</span></code></pre></div>
<h3 id="wikilinks">WikiLinks</h3>
<p>I probably want to convert the wikilinks first though:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">python3</span> ../../pandoc/convert_wikilinks.py <span class="at">-i</span> obsidian.md <span class="at">-o</span> obsidian-convert.md<span class="kw">;</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="ex">pandoc</span> obsidian-convert.md <span class="at">-o</span> obsidian-convert.pdf<span class="kw">;</span></span></code></pre></div>
<hr />
<h2 id="citations"><a href="http://localhost:4000/plague-phylogeography-projects/main/full/all?c=continent&amp;d=map&amp;p=full&amp;transmissions=show">Citations</a></h2>
<h3 id="pandoc-1">Pandoc</h3>
<p>One way of doing citations is with a bibtex key<sup>1</sup> This will work well for processing with pandoc, but isn’t going to show up in Auspice.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pandoc</span> <span class="at">-s</span> obsidian.md <span class="at">--filter</span> pandoc-doi2bib <span class="at">--citeproc</span> <span class="at">-o</span> obsidian.pdf <span class="at">--bibliography</span> ../../zotero.bib</span></code></pre></div>
<h3 id="doi">DOI</h3>
<p>My preferred way though is to use DOI whenever possible using the pandoc filter doi2bib<sup>2</sup></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">python3</span> ../../pandoc/convert_wikilinks.py <span class="at">-i</span> obsidian.md <span class="at">-o</span> obsidian-convert.md</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="ex">pandoc</span> <span class="at">-s</span> obsidian-convert.md <span class="at">--filter</span> pandoc-doi2bib <span class="at">--citeproc</span> <span class="at">-o</span> obsidian-convert.pdf</span></code></pre></div>
<h3 id="footnotes">Footnotes</h3>
<p>Another way might be to use the Footnote Shortcut in Obsidian. Again, this works really well with pandoc, but not with auspice.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="ex">python3</span> ../../pandoc/convert_wikilinks.py <span class="at">-i</span> obsidian.md <span class="at">-o</span> obsidian-convert.md<span class="kw">;</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="ex">pandoc</span> <span class="at">-s</span> obsidian.md <span class="at">--filter</span> pandoc-doi2bib <span class="at">--citeproc</span> <span class="at">-o</span> obsidian.pdf</span></code></pre></div>
<h3 id="markdown">Markdown</h3>
<p>What if I convert Markdown to Markdown?</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">python3</span> ../../pandoc/convert_wikilinks.py <span class="at">-i</span> obsidian.md <span class="at">-o</span> obsidian-convert.md<span class="kw">;</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="ex">pandoc</span> <span class="at">-t</span> markdown-citations <span class="at">-s</span> obsidian-convert.md <span class="at">--filter</span> pandoc-doi2bib <span class="at">--citeproc</span> <span class="at">-o</span> obsidian-convert-self.md<span class="kw">;</span></span></code></pre></div>
<hr />
<h2 id="style"><a href="http://localhost:4000/plague-phylogeography-projects/main/full/all?c=continent&amp;d=map&amp;p=full&amp;transmissions=show">Style</a></h2>
<p>I like the MVP CSS a lot. Can I export Auspice markdown to this?</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">python3</span> ../../pandoc/convert_wikilinks.py <span class="at">-i</span> obsidian.md <span class="at">-o</span> obsidian-convert.md</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="ex">pandoc</span> <span class="dt">\</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">-s</span> obsidian-convert.md <span class="dt">\</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">-c</span> ../../pandoc/templates/pandoc-mvp-css/css/mvp.css <span class="dt">\</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">--template</span> ../../pandoc/templates/pandoc-mvp-css/template.html <span class="dt">\</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">--toc</span> <span class="dt">\</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">--toc-depth</span><span class="op">=</span>2 <span class="dt">\</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">-o</span> obsidian-convert_mvp.html</span></code></pre></div>
<p>Wow, this looks gorgeous!</p>
<hr />
<h2 id="final-workflow"><a href="http://localhost:4000/plague-phylogeography-projects/main/full/all?c=continent&amp;d=map&amp;p=full&amp;transmissions=show">Final Workflow</a></h2>
<p>The final citation workflow I’ve decided on is:</p>
<ol type="1">
<li>Convert wiki links:</li>
</ol>
<div class="sourceCode" id="cb9"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="ex">python3</span> ../../pandoc/convert_wikilinks.py <span class="at">-i</span> obsidian.md <span class="at">-o</span> obsidian-convert.md<span class="kw">;</span></span></code></pre></div>
<ol start="2" type="1">
<li>Render Markdown with pandoc:</li>
</ol>
<div class="sourceCode" id="cb10"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pandoc</span> <span class="at">-t</span> markdown-citations <span class="at">-s</span> obsidian-convert.md <span class="at">--filter</span> pandoc-doi2bib <span class="at">--citeproc</span> <span class="at">-o</span> obsidian-convert-self.md<span class="kw">;</span></span></code></pre></div>
<ol start="3" type="1">
<li>Cleanup Markdown:</li>
</ol>
<div class="sourceCode" id="cb11"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sed</span> <span class="st">&#39;s/\.\&lt;/sup&gt;/&lt;sup&gt;/g&#39;</span> <span class="kw">|</span> <span class="dt">\</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sed</span> <span class="st">&#39;s/\&lt;/sup&gt;/&lt;\/sup&gt;/g&#39;</span> <span class="kw">|</span> <span class="dt">\</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sed</span> <span class="st">&#39;s///g&#39;</span> <span class="kw">|</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sed</span> <span class="st">&#39;s/author:/author:/g&#39;</span> <span class="dt">\</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="op">&gt;</span> obsidian-convert-self-clean.md</span></code></pre></div>
<ol start="4" type="1">
<li>Style with MVP:</li>
</ol>
<div class="sourceCode" id="cb12"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pandoc</span> <span class="dt">\</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">-s</span> obsidian-convert-self-clean.md <span class="dt">\</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">-c</span> ../../pandoc/templates/pandoc-mvp-css/css/mvp.css <span class="dt">\</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">--template</span> ../../pandoc/templates/pandoc-mvp-css/template.html <span class="dt">\</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">--toc</span> <span class="dt">\</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">--toc-depth</span><span class="op">=</span>2 <span class="dt">\</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">-o</span> obsidian-convert-self-clean.html</span></code></pre></div>
<h2 id="references"><a href="http://localhost:4000/plague-phylogeography-projects/main/full/all?c=continent&amp;d=map&amp;p=full&amp;transmissions=show">References</a></h2>
<p>1. Andrades Valtueña, A., Mittnik, A., Key, F. M., Haak, W., Allmäe, R., Belinskij, A., Daubaras, M., Feldman, M., Jankauskas, R., Janković, I., Massy, K., Novak, M., Pfrengle, S., Reinhold, S., Šlaus, M., Spyrou, M. A., Szécsényi-Nagy, A., Tõrv, M., Hansen, S., … Krause, J. (2017). The Stone Age Plague and Its Persistence in Eurasia. <em>Current Biology</em>, <em>27</em>(23), 3683–3691.e8. <a href="https://doi.org/10.1016/j.cub.2017.10.025" class="uri">https://doi.org/10.1016/j.cub.2017.10.025</a></p>
<p>2. Eaton, K. (2020). NCBImeta: Efficient and comprehensive metadata retrieval from NCBI databases. <em>Journal of Open Source Software</em>, <em>5</em>(46), 1990. <a href="https://doi.org/10.21105/joss.01990" class="uri">https://doi.org/10.21105/joss.01990</a></p>
<hr>
</article>
</main>
</body>
</html>
